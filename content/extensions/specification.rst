.. role:: spec-required
.. role:: spec-not-required
.. role:: spec-warn
.. role:: spec-obj

.. _specificationExtensions:

Extensions File Specification
=============================

RoboFont extensions are folders acting like files *\*.roboFontExt.*

File Structure
--------------

*   `info.plist`_

*   `lib`_

    * \*.py files

*   `html`_

    * index.html

    * \*.html

*   `resources`_

    * any file

info.plist
----------

Info.plist is a XML property list. see `A DTD is available <http://www.apple.com/DTDs/PropertyList-1.0.dtd>`_.

.. cssclass:: doctable

+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
| key                  | value                                                                                                                                                      |
+======================+============================================================================================================================================================+
| addToMenu            | :spec-obj:`list`                                                                                                                                           |
|                      +------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                      | A list of menu descriptions that should be added to the extension menu, see `Menu Item Description`_.                                                      |
|                      +------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                      | :spec-required:`required`                                                                                                                                  |
+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
| developer            | :spec-obj:`string`                                                                                                                                         |
|                      +------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                      | Name of the developer.                                                                                                                                     |
|                      +------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                      | :spec-required:`required`                                                                                                                                  |
+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
| developerURL         | :spec-obj:`string`                                                                                                                                         |
|                      +------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                      | Site url of the developer.                                                                                                                                 |
|                      +------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                      | :spec-required:`required`                                                                                                                                  |
+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
| html                 | :spec-obj:`integer`                                                                                                                                        |
|                      +------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                      | Indicating it has a html folder. zero, 0 is :spec-obj:`False`, one, 1 is :spec-obj:`True`. :spec-warn:`index.html is required if set to` :spec-obj:`True`. |
|                      +------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                      | :spec-not-required:`not required`                                                                                                                          |
+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
| launchAtStartUp      | :spec-obj:`integer`                                                                                                                                        |
|                      +------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                      | Indicating it should execute code during start up of RoboFont. zero, 0 is False, one, 1 os True.                                                           |
|                      +------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                      | :spec-required:`required`                                                                                                                                  |
+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
| mainScript           | :spec-obj:`string`                                                                                                                                         |
|                      +------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                      | \*.py filename path (relative to the lib folder) executed during start up of RoboFont.                                                                     |
|                      +------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                      | :spec-warn:`can be an empty string`                                                                                                                        |
|                      +------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                      | :spec-required:`required`                                                                                                                                  |
+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
| name                 | :spec-obj:`string`                                                                                                                                         |
|                      +------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                      | The name of the extensions.                                                                                                                                |
|                      +------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                      | :spec-required:`required`                                                                                                                                  |
+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
| timeStamp            | :spec-obj:`float`                                                                                                                                          |
|                      +------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                      | :spec-required:`required`                                                                                                                                  |
+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
| version              | :spec-obj:`string`                                                                                                                                         |
|                      +------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                      | Version number of the extension.                                                                                                                           |
|                      +------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                      | :spec-required:`required`                                                                                                                                  |
+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
| requiresVersionMajor | :spec-obj:`string`                                                                                                                                         |
|                      +------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                      | The required major number of RoboFont. To help extension builders which aren't supporting older versions of RoboFont.                                      |
|                      +------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                      | :spec-not-required:`not required`                                                                                                                          |
+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+
| requiresVersionMinor | :spec-obj:`string`                                                                                                                                         |
|                      +------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                      | The required minor number of RoboFont. To help extension builders which aren't supporting older versions of RoboFont.                                      |
|                      +------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                      | :spec-not-required:`not required`                                                                                                                          |
+----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------+

The *info.plist* can have custom keys if necessary for the extension. It is advised to use reverse domain name as keys (*com.example.myExtension*).

Menu Item Description
^^^^^^^^^^^^^^^^^^^^^

Each menu item descriptions is a dictionary with the following keys

.. cssclass:: doctable

+---------------+-------------------------------------------------------------------------------------------------------------+
| path          | :spec-obj:`string`                                                                                          |
|               +-------------------------------------------------------------------------------------------------------------+
|               | \*.py filename path (relative to the lib folder) this will be executed when the menu item is being clicked. |
|               +-------------------------------------------------------------------------------------------------------------+
|               | :spec-required:`required`                                                                                   |
+---------------+-------------------------------------------------------------------------------------------------------------+
| preferredName | :spec-obj:`string`                                                                                          |
|               +-------------------------------------------------------------------------------------------------------------+
|               | The preferred name of the menu item, only be used during display of the menu item.                          |
|               +-------------------------------------------------------------------------------------------------------------+
|               | :spec-required:`required`                                                                                   |
+---------------+-------------------------------------------------------------------------------------------------------------+
| shortKey      | :spec-obj:`string` or :spec-obj:`tuple`                                                                     |
|               +-------------------------------------------------------------------------------------------------------------+
|               | :spec-obj:`string`: a single keystroke that can be attached to the menu item.                               |
|               +-------------------------------------------------------------------------------------------------------------+
|               | :spec-obj:`tuple`: ( <modifierFlag> :spec-obj:`integer`, <keyStroke> :spec-obj:`string` )                   |
|               +-------------------------------------------------------------------------------------------------------------+
|               | :spec-warn:`can be an empty string`                                                                         |
|               +-------------------------------------------------------------------------------------------------------------+
|               | :spec-required:`required`                                                                                   |
+---------------+-------------------------------------------------------------------------------------------------------------+


lib
---

A folder containing all the \*.py script. If a developer prefers to send out only \*.pyc files that should be possible but take note that the file should be made with python 2.7 (the build in python version)

This folder will be added to the sys.path so it can import all the other files and folders as modules.

html
----

An 'html' folder is not required. If such a folder is declared in the info.plist it should contain an 'index.html'. These is plain html that is rendered in the help window with `WebKit <http://www.webkit.org/>`_.

resources
---------

Any additional file necessary for your extension. Commonly used for bitmap, \*.png to build tool bar icons, cursors. Or additional compiled command-line tools.